if(!window.__OLIVIA_WIDGET_INITIAL)var WidgetPrecursor=(function(){'use strict';if(window.__OLIVIA_WIDGET_INITIAL)return;window.__OLIVIA_WIDGET_INITIAL=true;var a='_apply_container_holder';var b,c,d,e;var f='setKey';var g=/localhost|127\.0\.0\.1|::1|\.local|^$/i.test(window.location.hostname);var h='http://localhost:8000',i=[h,'static'].join('/'),j=window._applyLocal||g;var k={css_vendor:'widget/vendor.css',js_vendor:'widget/vendor.js',css_components:'widget/components.css',js_components:'widget/components.js',js_main:g?'site/js/widget-main.js':'widget/widget-main.js',js_runtime:'widget/js/runtime~widget-main.js'};var l=function(a){b=(a||window.oliviaChatBaseUrl||window._applybase||h).replace(/\/$/,'');},m=function(){return b;},n=function(a){if(a&&/^http/.test(a))return a;return [i,a].join('/');},o=function(){var a=Number(q(location.href,'__ai_debug'));return Boolean(j||a);},p=function(){return n(k.css_components);},q=function(a,b,c){if(!c)a=a.toLowerCase();b=b.replace(/[\[\]]/g,'\\$&').toLowerCase();var d=new RegExp('[?&]'+b+'(=([^&#]*)|&|#|$)'),e=d.exec(a);if(e&&e[2])return decodeURIComponent(e[2].replace(/\+/g,' '));return '';},r=function(a,b){var c=a?[m(),a].join('/'):m();if(b){var d=[];for(var e in b)if(b[e])d.push([encodeURIComponent(e),encodeURIComponent(b[e])].join('='));if(d.length)c=[c,d.join('&')].join('?');}return c;};l();var s=function(a,b){var c=document.createElement(a);for(var d in b)c.setAttribute(d,b[d]);return c;};var t=function(a){(document.getElementsByTagName('head')[0]||document.documentElement).appendChild(a);};var u=function(a,b){var c=s('link',{href:a,rel:'stylesheet',media:'print',onload:"this.media='all'"});if(typeof b=='function')b.call();t(c);};var v=function(a,b,c){var d=s('script',{src:a,type:'text/javascript',async:Boolean(b)});if(typeof c=='function')if(d.readyState){d.onreadystatechange=function(){if(['complete','loaded'].indexOf(this.readyState)>-1)c.call();};}else d.onload=c;t(d);};var w=function(b){if(document.getElementById(a)){if(typeof b=='function')b.call();return true;}return false;};var x=function(a){var b=n('vendor/jquery/jquery-3.6.0.min.js');if(w())v(b,true,a);else{var c=[b,n(k.js_vendor),n(k.js_components)];var d=c.length,e=function(){if(--d)return;a.call();};c.forEach(function(a){v(n(a),true,e);});}};var y=function(a){if(!w(a)){u(n(k.css_vendor));u(n(k.css_components),a);}};var z=function(){if(o()&&console.table){var a=[];for(var b in k)a.push([b,n(k[b])]);var f=[['appVersion',e],['originalBaseUrl',window.oliviaChatBaseUrl||window._applybase],['officalBaseUrl',m()],['staticBaseUrl',i],['isChineseIP',c],['isParadoxProd',d]].concat(a,window.oliviaChatData||window._apply);console.table(f);}};var A=function(a,b){var c=new XMLHttpRequest();c.open('GET',r(a,b),true);c.responseType='json';c.setRequestHeader('X-Requested-With','XMLHttpRequest');c.withCredentials=true;c.isDone=function(){return this.readyState==XMLHttpRequest.DONE;};c.isOkResponse=function(){return this.isDone()&&this.status==200;};c.isCanaryRedirect=function(){return this.isDone()&&this.status==307&&this.response.redirect_endpoint;};c.send();return c;};var B='';(window.oliviaChatData||window._apply).forEach(function(a){if(a[0]===f)B=a[1];});if(B){var C;var D=function(a){var b='widget_init_checkup/'+B;var f={is_forwarding:a};if(q(location.href,'__next')!=='')f.next=q(location.href,'__next');else if(typeof window.__zone_symbol__ZoneAwarePromise!=='undefined')Object.defineProperty(window,'Promise',{get:function(){var a=window.__zone_symbol__Promise||window.__zone_symbol__ZoneAwarePromise;if(window.__zone_symbol__Promise&&window.__zone_symbol__Promise.prototype.__zone_symbol__then){var b=window.__zone_symbol__Promise.prototype.__zone_symbol__then;a.prototype.then=function(a,c){try{var d=this;var e=new window.__zone_symbol__ZoneAwarePromise(function(a,c){b.call(d,a,c);});return e.then(a,c);}catch(f){}return b.call(this,arguments);};}return a;},set:function(){}});A(b,f).onreadystatechange=function(){var b=this.response;if(b&&typeof b==='string')b=JSON.parse(b);if(this.isDone()&&b&&!a){c=b.is_chinese_ip;C=b.canary_instance_on;}if(this.isCanaryRedirect()){l(b.redirect_endpoint);D(1);}else if(this.isOkResponse()){i=b.STATIC_BASE_URL;e=b.app_version;d=b.is_paradox_prod;var f=o()&&e;for(var g in k){var h=b.widget_assets[g];k[g]=h||k[g];}window._applyPublicPath=i;var j=document.createElement('a');j.href=i;var m=j.origin;var p=s('link',{rel:'dns-prefetch',href:m});t(p);var q=s('link',{rel:'preconnect',href:m});t(q);if(b.next)v(n(k.js_runtime),true);v(n(k.js_main));if(C&&f)console.warn('ParadoxWarn: Please pay attention, your widget is running under the Canary account!');z();}};};D();}else{console.error('ClientWidgetID NotFound, please help double check the widget setting again!');z();}return{widgetId:B,isDevMode:o,isChineseIP:c,isParadoxProd:d,getBaseUrl:m,setBaseUrl:l,getUrlParam:q,getAssetUrl:n,getRequestUrl:r,injectJS:v,injectRequiredCSS:y,injectRequiredJS:x,getComponentsCSS:p};})();window.__OLIVIA_WIDGET_INITIAL=true;