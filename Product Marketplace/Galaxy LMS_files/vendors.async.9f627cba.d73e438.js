(window.wpJsonpFlightsWidget=window.wpJsonpFlightsWidget||[]).push([[32],{MP4T:function(s,n,a){var r=a("EP3Q"),t=(r.System,r.VbrMode),_=r.Float,o=r.ShortBlock,l=r.Util,e=r.Arrays,f=(r.new_array_n,r.new_byte,r.new_double,r.new_float),i=r.new_float_n,m=r.new_int,h=(r.new_int_n,r.assert),v=a("oNpY"),u=a("Ypbz");s.exports=function(){var s=new v,n=2.302585092994046,a=1/217621504/(u.BLKSIZE/2);function r(s,n){for(var r=0,t=0;t<u.BLKSIZE/2;++t)r+=s[t]*n.ATH.eql_w[t];return r*=a}function S(n,a,t,_,o,e,f,i,m,h,v){var S=n.internal_flags;if(m<2)s.fft_long(S,_[o],m,h,v),s.fft_short(S,e[f],m,h,v);else if(2==m){for(var M=u.BLKSIZE-1;M>=0;--M){var b=_[o+0][M],c=_[o+1][M];_[o+0][M]=(b+c)*l.SQRT2*.5,_[o+1][M]=(b-c)*l.SQRT2*.5}for(var p=2;p>=0;--p)for(M=u.BLKSIZE_s-1;M>=0;--M){b=e[f+0][p][M],c=e[f+1][p][M];e[f+0][p][M]=(b+c)*l.SQRT2*.5,e[f+1][p][M]=(b-c)*l.SQRT2*.5}}a[0]=_[o+0][0],a[0]*=a[0];for(M=u.BLKSIZE/2-1;M>=0;--M){var T=_[o+0][u.BLKSIZE/2-M],B=_[o+0][u.BLKSIZE/2+M];a[u.BLKSIZE/2-M]=.5*(T*T+B*B)}for(p=2;p>=0;--p){t[p][0]=e[f+0][p][0],t[p][0]*=t[p][0];for(M=u.BLKSIZE_s/2-1;M>=0;--M){T=e[f+0][p][u.BLKSIZE_s/2-M],B=e[f+0][p][u.BLKSIZE_s/2+M];t[p][u.BLKSIZE_s/2-M]=.5*(T*T+B*B)}}var A=0;for(M=11;M<u.HBLKSIZE;M++)A+=a[M];if(S.tot_ener[m]=A,n.analysis){for(M=0;M<u.HBLKSIZE;M++)S.pinfo.energy[i][m][M]=S.pinfo.energy_save[m][M],S.pinfo.energy_save[m][M]=a[M];S.pinfo.pe[i][m]=S.pe[m]}2==n.athaa_loudapprox&&m<2&&(S.loudness_sq[i][m]=S.loudness_sq_save[m],S.loudness_sq_save[m]=r(a,S))}var M,b,c,p=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749],T=[3.3246*3.3246,3.23837*3.23837,9.9500500969,9.0247369744,8.1854926609,7.0440875649,2.46209*2.46209,2.284*2.284,4.4892710641,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,2.4621061921,2.1508568964,1.37074*1.37074,1.31036*1.31036,1.5691069696,1.4555939904,1.16203*1.16203,1.2715945225,1.09428*1.09428,1.0659*1.0659,1.0779838276,1.0382591025,1],B=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],A=[5.5396212496,2.29259*2.29259,4.9868695969,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,2.2499700001,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.2339655056,1.0779838276];function E(s,n,a,r,t,_){var o;if(n>s){if(!(n<s*b))return s+n;o=n/s}else{if(s>=n*b)return s+n;o=s/n}if(h(s>=0),h(n>=0),s+=n,r+3<=6){if(o>=M)return s;var e=0|l.FAST_LOG10_X(o,16);return s*B[e]}var f,i;e=0|l.FAST_LOG10_X(o,16);return n=0!=_?t.ATH.cb_s[a]*t.ATH.adjust:t.ATH.cb_l[a]*t.ATH.adjust,h(n>=0),s<c*n?s>n?(f=1,e<=13&&(f=A[e]),i=l.FAST_LOG10_X(s/n,10/15),s*((T[e]-f)*i+f)):e>13?s:s*A[e]:s*T[e]}var d=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1];function P(s,n,a){var r;if(s<0&&(s=0),n<0&&(n=0),s<=0)return n;if(n<=0)return s;if(r=n>s?n/s:s/n,-2<=a&&a<=2){if(r>=M)return s+n;var t=0|l.FAST_LOG10_X(r,16);return(s+n)*d[t]}return r<b?s+n:(s<n&&(s=n),s)}function k(s,n,a,r,t){var _,o,l=0,e=0;for(_=o=0;_<u.SBMAX_s;++o,++_){for(var f=s.bo_s[_],i=s.npart_s,m=f<i?f:i;o<m;)h(n[o]>=0),h(a[o]>=0),l+=n[o],e+=a[o],o++;if(s.en[r].s[_][t]=l,s.thm[r].s[_][t]=e,o>=i){++_;break}h(n[o]>=0),h(a[o]>=0);var v=s.PSY.bo_s_weight[_],S=1-v;l=v*n[o],e=v*a[o],s.en[r].s[_][t]+=l,s.thm[r].s[_][t]+=e,l=S*n[o],e=S*a[o]}for(;_<u.SBMAX_s;++_)s.en[r].s[_][t]=0,s.thm[r].s[_][t]=0}function y(s,n,a,r){var t,_,o=0,l=0;for(t=_=0;t<u.SBMAX_l;++_,++t){for(var e=s.bo_l[t],f=s.npart_l,i=e<f?e:f;_<i;)h(n[_]>=0),h(a[_]>=0),o+=n[_],l+=a[_],_++;if(s.en[r].l[t]=o,s.thm[r].l[t]=l,_>=f){++t;break}h(n[_]>=0),h(a[_]>=0);var m=s.PSY.bo_l_weight[t],v=1-m;o=m*n[_],l=m*a[_],s.en[r].l[t]+=o,s.thm[r].l[t]+=l,o=v*n[_],l=v*a[_]}for(;t<u.SBMAX_l;++t)s.en[r].l[t]=0,s.thm[r].l[t]=0}function w(s,n,a,r,t,_){var o,l,e=s.internal_flags;for(l=o=0;l<e.npart_s;++l){for(var f=0,i=0,m=e.numlines_s[l],v=0;v<m;++v,++o){var S=n[_][o];f+=S,i<S&&(i=S)}a[l]=f}for(h(l==e.npart_s),h(129==o),o=l=0;l<e.npart_s;l++){var M=e.s3ind_s[l][0],b=e.s3_ss[o++]*a[M];for(++M;M<=e.s3ind_s[l][1];)b+=e.s3_ss[o]*a[M],++o,++M;var c=2*e.nb_s1[t][l];if(r[l]=Math.min(b,c),e.blocktype_old[1&t]==u.SHORT_TYPE){c=16*e.nb_s2[t][l];var p=r[l];r[l]=Math.min(c,p)}e.nb_s2[t][l]=e.nb_s1[t][l],e.nb_s1[t][l]=b,h(r[l]>=0)}for(;l<=u.CBANDS;++l)a[l]=0,r[l]=0}function L(s,n,a){return a>=1?s:a<=0?n:n>0?Math.pow(s/n,a)*n:0}var g=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function I(s,a){for(var r=309.07,t=0;t<u.SBMAX_s-1;t++)for(var _=0;_<3;_++){var o=s.thm.s[t][_];if(h(t<g.length),o>0){var e=o*a,f=s.en.s[t][_];f>e&&(f>1e10*e?r+=g[t]*(10*n):(h(e>0),r+=g[t]*l.FAST_LOG10(f/e)))}}return r}var H=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function R(s,a){for(var r=281.0575,t=0;t<u.SBMAX_l-1;t++){var _=s.thm.l[t];if(h(t<H.length),_>0){var o=_*a,e=s.en.l[t];e>o&&(e>1e10*o?r+=H[t]*(10*n):(h(o>0),r+=H[t]*l.FAST_LOG10(e/o)))}}return r}function N(s,n,a,r,t){var _,o;for(_=o=0;_<s.npart_l;++_){var l,e=0,f=0;for(l=0;l<s.numlines_l[_];++l,++o){var i=n[o];h(i>=0),e+=i,f<i&&(f=i)}a[_]=e,r[_]=f,t[_]=e*s.rnumlines_l[_],h(s.rnumlines_l[_]>=0),h(e>=0),h(a[_]>=0),h(r[_]>=0),h(t[_]>=0)}}function O(s,n,a,r){var t=p.length-1,_=0,o=a[_]+a[_+1];(h(o>=0),o>0)?((l=n[_])<n[_+1]&&(l=n[_+1]),h(s.numlines_l[_]+s.numlines_l[_+1]-1>0),(e=0|(o=20*(2*l-o)/(o*(s.numlines_l[_]+s.numlines_l[_+1]-1))))>t&&(e=t),r[_]=e):r[_]=0;for(_=1;_<s.npart_l-1;_++){var l,e;if(o=a[_-1]+a[_]+a[_+1],h(o>=0),o>0)(l=n[_-1])<n[_]&&(l=n[_]),l<n[_+1]&&(l=n[_+1]),h(s.numlines_l[_-1]+s.numlines_l[_]+s.numlines_l[_+1]-1>0),(e=0|(o=20*(3*l-o)/(o*(s.numlines_l[_-1]+s.numlines_l[_]+s.numlines_l[_+1]-1))))>t&&(e=t),r[_]=e;else r[_]=0}(h(_>0),h(_==s.npart_l-1),o=a[_-1]+a[_],h(o>=0),o>0)?((l=n[_-1])<n[_]&&(l=n[_]),h(s.numlines_l[_-1]+s.numlines_l[_]-1>0),(e=0|(o=20*(2*l-o)/(o*(s.numlines_l[_-1]+s.numlines_l[_]-1))))>t&&(e=t),r[_]=e):r[_]=0;h(_==s.npart_l-1)}var Z=[-1730326e-23,-.01703172,-1349528e-23,.0418072,-673278e-22,-.0876324,-30835e-21,.1863476,-1104424e-22,-.627638];function K(n,a,r,t,_,o,e,f){var i=n.internal_flags;if(t<2)s.fft_long(i,e[f],t,a,r);else if(2==t)for(var m=u.BLKSIZE-1;m>=0;--m){var h=e[f+0][m],v=e[f+1][m];e[f+0][m]=(h+v)*l.SQRT2*.5,e[f+1][m]=(h-v)*l.SQRT2*.5}o[0]=e[f+0][0],o[0]*=o[0];for(m=u.BLKSIZE/2-1;m>=0;--m){var S=e[f+0][u.BLKSIZE/2-m],M=e[f+0][u.BLKSIZE/2+m];o[u.BLKSIZE/2-m]=.5*(S*S+M*M)}var b=0;for(m=11;m<u.HBLKSIZE;m++)b+=o[m];if(i.tot_ener[t]=b,n.analysis){for(m=0;m<u.HBLKSIZE;m++)i.pinfo.energy[_][t][m]=i.pinfo.energy_save[t][m],i.pinfo.energy_save[t][m]=o[m];i.pinfo.pe[_][t]=i.pe[t]}}function Y(n,a,r,t,_,o,e,f){var i=n.internal_flags;if(0==_&&t<2&&s.fft_short(i,e[f],t,a,r),2==t)for(var m=u.BLKSIZE_s-1;m>=0;--m){var h=e[f+0][_][m],v=e[f+1][_][m];e[f+0][_][m]=(h+v)*l.SQRT2*.5,e[f+1][_][m]=(h-v)*l.SQRT2*.5}o[_][0]=e[f+0][_][0],o[_][0]*=o[_][0];for(m=u.BLKSIZE_s/2-1;m>=0;--m){var S=e[f+0][_][u.BLKSIZE_s/2-m],M=e[f+0][_][u.BLKSIZE_s/2+m];o[_][u.BLKSIZE_s/2-m]=.5*(S*S+M*M)}}function x(s,n,a,t){var _=s.internal_flags;2==s.athaa_loudapprox&&a<2&&(_.loudness_sq[n][a]=_.loudness_sq_save[a],_.loudness_sq_save[a]=r(t,_))}this.L3psycho_anal_ns=function(s,n,a,r,_,l,v,M,b,c){var T,B,A,d,P,g,H,K,Y,x,C=s.internal_flags,D=i([2,u.BLKSIZE]),X=i([2,3,u.BLKSIZE_s]),G=f(u.CBANDS+1),q=f(u.CBANDS+1),F=f(u.CBANDS+2),J=m(2),Q=m(2),V=i([2,576]),j=m(u.CBANDS+2),U=m(u.CBANDS+2);for(e.fill(U,0),T=C.channels_out,s.mode==MPEGMode.JOINT_STEREO&&(T=4),Y=s.VBR==t.vbr_off?0==C.ResvMax?0:C.ResvSize/C.ResvMax*.5:s.VBR==t.vbr_rh||s.VBR==t.vbr_mtrh||s.VBR==t.vbr_mt?.6:1,B=0;B<C.channels_out;B++){var z=n[B],W=a+576-350-21+192;for(h(10==Z.length),d=0;d<576;d++){var $,ss;for($=z[W+d+10],ss=0,P=0;P<9;P+=2)$+=Z[P]*(z[W+d+P]+z[W+d+21-P]),ss+=Z[P+1]*(z[W+d+P+1]+z[W+d+21-P-1]);V[B][d]=$+ss}_[r][B].en.assign(C.en[B]),_[r][B].thm.assign(C.thm[B]),T>2&&(l[r][B].en.assign(C.en[B+2]),l[r][B].thm.assign(C.thm[B+2]))}for(B=0;B<T;B++){var ns,as=f(12),rs=[0,0,0,0],ts=f(12),_s=1,os=f(u.CBANDS),ls=f(u.CBANDS),es=[0,0,0,0],fs=f(u.HBLKSIZE),is=i([3,u.HBLKSIZE_s]);for(h(C.npart_s<=u.CBANDS),h(C.npart_l<=u.CBANDS),d=0;d<3;d++)as[d]=C.nsPsy.last_en_subshort[B][d+6],h(C.nsPsy.last_en_subshort[B][d+4]>0),ts[d]=as[d]/C.nsPsy.last_en_subshort[B][d+4],rs[0]+=as[d];if(2==B)for(d=0;d<576;d++){var ms,hs;ms=V[0][d],hs=V[1][d],V[0][d]=ms+hs,V[1][d]=ms-hs}var vs=V[1&B],us=0;for(d=0;d<9;d++){for(var Ss=us+64,Ms=1;us<Ss;us++)Ms<Math.abs(vs[us])&&(Ms=Math.abs(vs[us]));C.nsPsy.last_en_subshort[B][d]=as[d+3]=Ms,rs[1+d/3]+=Ms,Ms>as[d+3-2]?(h(as[d+3-2]>0),Ms/=as[d+3-2]):as[d+3-2]>10*Ms?(h(Ms>0),Ms=as[d+3-2]/(10*Ms)):Ms=0,ts[d+3]=Ms}if(s.analysis){var bs=ts[0];for(d=1;d<12;d++)bs<ts[d]&&(bs=ts[d]);C.pinfo.ers[r][B]=C.pinfo.ers_save[B],C.pinfo.ers_save[B]=bs}for(ns=3==B?C.nsPsy.attackthre_s:C.nsPsy.attackthre,d=0;d<12;d++)0==es[d/3]&&ts[d]>ns&&(es[d/3]=d%3+1);for(d=1;d<4;d++){var cs;rs[d-1]>rs[d]?(h(rs[d]>0),cs=rs[d-1]/rs[d]):(h(rs[d-1]>0),cs=rs[d]/rs[d-1]),cs<1.7&&(es[d]=0,1==d&&(es[0]=0))}for(0!=es[0]&&0!=C.nsPsy.lastAttacks[B]&&(es[0]=0),3!=C.nsPsy.lastAttacks[B]&&es[0]+es[1]+es[2]+es[3]==0||(_s=0,0!=es[1]&&0!=es[0]&&(es[1]=0),0!=es[2]&&0!=es[1]&&(es[2]=0),0!=es[3]&&0!=es[2]&&(es[3]=0)),B<2?Q[B]=_s:0==_s&&(Q[0]=Q[1]=0),b[B]=C.tot_ener[B],S(s,fs,is,D,1&B,X,1&B,r,B,n,a),N(C,fs,G,os,ls),O(C,os,ls,j),K=0;K<3;K++){var ps,Ts;for(w(s,is,q,F,B,K),k(C,q,F,B,K),H=0;H<u.SBMAX_s;H++){if(Ts=C.thm[B].s[H][K],Ts*=.8,es[K]>=2||1==es[K+1]){var Bs=0!=K?K-1:2;Ms=L(C.thm[B].s[H][Bs],Ts,.6*Y);Ts=Math.min(Ts,Ms)}if(1==es[K]){Bs=0!=K?K-1:2,Ms=L(C.thm[B].s[H][Bs],Ts,.3*Y);Ts=Math.min(Ts,Ms)}else if(0!=K&&3==es[K-1]||0==K&&3==C.nsPsy.lastAttacks[B]){Bs=2!=K?K+1:0,Ms=L(C.thm[B].s[H][Bs],Ts,.3*Y);Ts=Math.min(Ts,Ms)}ps=as[3*K+3]+as[3*K+4]+as[3*K+5],6*as[3*K+5]<ps&&(Ts*=.5,6*as[3*K+4]<ps&&(Ts*=.5)),C.thm[B].s[H][K]=Ts}}for(C.nsPsy.lastAttacks[B]=es[2],g=0,A=0;A<C.npart_l;A++){for(var As=C.s3ind[A][0],Es=G[As]*p[j[As]],ds=C.s3_ll[g++]*Es;++As<=C.s3ind[A][1];)Es=G[As]*p[j[As]],ds=E(ds,C.s3_ll[g++]*Es,As,As-A,C,0);ds*=.158489319246111,C.blocktype_old[1&B]==u.SHORT_TYPE?F[A]=ds:F[A]=L(Math.min(ds,Math.min(2*C.nb_1[B][A],16*C.nb_2[B][A])),ds,Y),C.nb_2[B][A]=C.nb_1[B][A],C.nb_1[B][A]=ds}for(;A<=u.CBANDS;++A)G[A]=0,F[A]=0;y(C,G,F,B)}(s.mode!=MPEGMode.STEREO&&s.mode!=MPEGMode.JOINT_STEREO||s.interChRatio>0&&function(s,n){var a=s.internal_flags;if(a.channels_out>1){for(var r=0;r<u.SBMAX_l;r++){var t=a.thm[0].l[r],_=a.thm[1].l[r];a.thm[0].l[r]+=_*n,a.thm[1].l[r]+=t*n}for(r=0;r<u.SBMAX_s;r++)for(var o=0;o<3;o++){t=a.thm[0].s[r][o],_=a.thm[1].s[r][o];a.thm[0].s[r][o]+=_*n,a.thm[1].s[r][o]+=t*n}}}(s,s.interChRatio),s.mode==MPEGMode.JOINT_STEREO)&&(!function(s){for(var n=0;n<u.SBMAX_l;n++)if(!(s.thm[0].l[n]>1.58*s.thm[1].l[n]||s.thm[1].l[n]>1.58*s.thm[0].l[n])){var a=s.mld_l[n]*s.en[3].l[n],r=Math.max(s.thm[2].l[n],Math.min(s.thm[3].l[n],a));a=s.mld_l[n]*s.en[2].l[n];var t=Math.max(s.thm[3].l[n],Math.min(s.thm[2].l[n],a));s.thm[2].l[n]=r,s.thm[3].l[n]=t}for(n=0;n<u.SBMAX_s;n++)for(var _=0;_<3;_++)if(!(s.thm[0].s[n][_]>1.58*s.thm[1].s[n][_]||s.thm[1].s[n][_]>1.58*s.thm[0].s[n][_])){a=s.mld_s[n]*s.en[3].s[n][_],r=Math.max(s.thm[2].s[n][_],Math.min(s.thm[3].s[n][_],a));a=s.mld_s[n]*s.en[2].s[n][_];t=Math.max(s.thm[3].s[n][_],Math.min(s.thm[2].s[n][_],a));s.thm[2].s[n][_]=r,s.thm[3].s[n][_]=t}}(C),x=s.msfix,Math.abs(x)>0&&function(s,n,a){var r=n,t=Math.pow(10,a);n*=2,r*=2;for(var _=0;_<u.SBMAX_l;_++){if(i=s.ATH.cb_l[s.bm_l[_]]*t,(l=Math.min(Math.max(s.thm[0].l[_],i),Math.max(s.thm[1].l[_],i)))*n<(e=Math.max(s.thm[2].l[_],i))+(f=Math.max(s.thm[3].l[_],i)))h((e*=m=l*r/(e+f))+(f*=m)>0);s.thm[2].l[_]=Math.min(e,s.thm[2].l[_]),s.thm[3].l[_]=Math.min(f,s.thm[3].l[_])}for(t*=u.BLKSIZE_s/u.BLKSIZE,_=0;_<u.SBMAX_s;_++)for(var o=0;o<3;o++){var l,e,f,i,m;if(i=s.ATH.cb_s[s.bm_s[_]]*t,(l=Math.min(Math.max(s.thm[0].s[_][o],i),Math.max(s.thm[1].s[_][o],i)))*n<(e=Math.max(s.thm[2].s[_][o],i))+(f=Math.max(s.thm[3].s[_][o],i)))h((e*=m=l*n/(e+f))+(f*=m)>0);s.thm[2].s[_][o]=Math.min(s.thm[2].s[_][o],e),s.thm[3].s[_][o]=Math.min(s.thm[3].s[_][o],f)}}(C,x,s.ATHlower*C.ATH.adjust));for(function(s,n,a,r){var t=s.internal_flags;s.short_blocks!=o.short_block_coupled||0!=n[0]&&0!=n[1]||(n[0]=n[1]=0);for(var _=0;_<t.channels_out;_++)r[_]=u.NORM_TYPE,s.short_blocks==o.short_block_dispensed&&(n[_]=1),s.short_blocks==o.short_block_forced&&(n[_]=0),0!=n[_]?(h(t.blocktype_old[_]!=u.START_TYPE),t.blocktype_old[_]==u.SHORT_TYPE&&(r[_]=u.STOP_TYPE)):(r[_]=u.SHORT_TYPE,t.blocktype_old[_]==u.NORM_TYPE&&(t.blocktype_old[_]=u.START_TYPE),t.blocktype_old[_]==u.STOP_TYPE&&(t.blocktype_old[_]=u.SHORT_TYPE)),a[_]=t.blocktype_old[_],t.blocktype_old[_]=r[_]}(s,Q,c,J),B=0;B<T;B++){var Ps,ks,ys,ws=0;B>1?(Ps=M,ws=-2,ks=u.NORM_TYPE,c[0]!=u.SHORT_TYPE&&c[1]!=u.SHORT_TYPE||(ks=u.SHORT_TYPE),ys=l[r][B-2]):(Ps=v,ws=0,ks=c[B],ys=_[r][B]),ks==u.SHORT_TYPE?Ps[ws+B]=I(ys,C.masking_lower):Ps[ws+B]=R(ys,C.masking_lower),s.analysis&&(C.pinfo.pe[r][B]=Ps[ws+B])}return 0};var C=[-1730326e-23,-.01703172,-1349528e-23,.0418072,-673278e-22,-.0876324,-30835e-21,.1863476,-1104424e-22,-.627638];function D(s,n,a){if(0==a)for(var r=0;r<s.npart_s;r++)s.nb_s2[n][r]=s.nb_s1[n][r],s.nb_s1[n][r]=0}function X(s,n){for(var a=0;a<s.npart_l;a++)s.nb_2[n][a]=s.nb_1[n][a],s.nb_1[n][a]=0}function G(s,n,a,r,t,_){var o,l,e,i=s.internal_flags,m=new float[u.CBANDS],v=f(u.CBANDS),S=new int[u.CBANDS];for(e=l=0;e<i.npart_s;++e){var M=0,b=0,c=i.numlines_s[e];for(o=0;o<c;++o,++l){var T=n[_][l];M+=T,b<T&&(b=T)}a[e]=M,h(M>=0),m[e]=b,h(c>0),v[e]=M/c,h(v[e]>=0)}for(h(e==i.npart_s),h(129==l);e<u.CBANDS;++e)m[e]=0,v[e]=0;for(function(s,n,a,r){var t=p.length-1,_=0,o=a[_]+a[_+1];for(h(o>=0),o>0?((l=n[_])<n[_+1]&&(l=n[_+1]),h(s.numlines_s[_]+s.numlines_s[_+1]-1>0),(e=0|(o=20*(2*l-o)/(o*(s.numlines_s[_]+s.numlines_s[_+1]-1))))>t&&(e=t),r[_]=e):r[_]=0,_=1;_<s.npart_s-1;_++){var l,e;if(o=a[_-1]+a[_]+a[_+1],h(_+1<s.npart_s),h(o>=0),o>0)(l=n[_-1])<n[_]&&(l=n[_]),l<n[_+1]&&(l=n[_+1]),h(s.numlines_s[_-1]+s.numlines_s[_]+s.numlines_s[_+1]-1>0),(e=0|(o=20*(3*l-o)/(o*(s.numlines_s[_-1]+s.numlines_s[_]+s.numlines_s[_+1]-1))))>t&&(e=t),r[_]=e;else r[_]=0}h(_>0),h(_==s.npart_s-1),o=a[_-1]+a[_],h(o>=0),o>0?((l=n[_-1])<n[_]&&(l=n[_]),h(s.numlines_s[_-1]+s.numlines_s[_]-1>0),(e=0|(o=20*(2*l-o)/(o*(s.numlines_s[_-1]+s.numlines_s[_]-1))))>t&&(e=t),r[_]=e):r[_]=0,h(_==s.npart_s-1)}(i,m,v,S),l=e=0;e<i.npart_s;e++){var B,A,E,d,k,y=i.s3ind_s[e][0],w=i.s3ind_s[e][1];for(B=S[y],A=1,d=i.s3_ss[l]*a[y]*p[S[y]],++l,++y;y<=w;)B+=S[y],A+=1,d=P(d,E=i.s3_ss[l]*a[y]*p[S[y]],y-e),++l,++y;d*=k=.5*p[B=(1+2*B)/(2*A)],r[e]=d,i.nb_s2[t][e]=i.nb_s1[t][e],i.nb_s1[t][e]=d,E=m[e],E*=i.minval_s[e],E*=k,r[e]>E&&(r[e]=E),i.masking_lower>1&&(r[e]*=i.masking_lower),r[e]>a[e]&&(r[e]=a[e]),i.masking_lower<1&&(r[e]*=i.masking_lower),h(r[e]>=0)}for(;e<u.CBANDS;++e)a[e]=0,r[e]=0}function q(s,n,a,r,t){var _,o=f(u.CBANDS),l=f(u.CBANDS),e=m(u.CBANDS+2);N(s,n,a,o,l),O(s,o,l,e);var i=0;for(_=0;_<s.npart_l;_++){var v,S,M,b=s.s3ind[_][0],c=s.s3ind[_][1],T=0,B=0;for(T=e[b],B+=1,S=s.s3_ll[i]*a[b]*p[e[b]],++i,++b;b<=c;)T+=e[b],B+=1,S=P(S,v=s.s3_ll[i]*a[b]*p[e[b]],b-_),++i,++b;if(S*=M=.5*p[T=(1+2*T)/(2*B)],s.blocktype_old[1&t]==u.SHORT_TYPE){var A=2*s.nb_1[t][_];r[_]=A>0?Math.min(S,A):Math.min(S,.3*a[_])}else{var E=16*s.nb_2[t][_],d=2*s.nb_1[t][_];E<=0&&(E=S),d<=0&&(d=S),A=s.blocktype_old[1&t]==u.NORM_TYPE?Math.min(d,E):d,r[_]=Math.min(S,A)}s.nb_2[t][_]=s.nb_1[t][_],s.nb_1[t][_]=S,v=o[_],v*=s.minval_l[_],v*=M,r[_]>v&&(r[_]=v),s.masking_lower>1&&(r[_]*=s.masking_lower),r[_]>a[_]&&(r[_]=a[_]),s.masking_lower<1&&(r[_]*=s.masking_lower),h(r[_]>=0)}for(;_<u.CBANDS;++_)a[_]=0,r[_]=0}function F(s,n,a,r,t,_,o){for(var l,e,f=2*_,i=_>0?Math.pow(10,t):1,m=0;m<o;++m){var v=s[2][m],u=s[3][m],S=n[0][m],M=n[1][m],b=n[2][m],c=n[3][m];if(S<=1.58*M&&M<=1.58*S){var p=a[m]*u,T=a[m]*v;e=Math.max(b,Math.min(c,p)),l=Math.max(c,Math.min(b,T))}else e=b,l=c;if(_>0){var B,A,E=r[m]*i;if(B=Math.min(Math.max(S,E),Math.max(M,E)),(A=(b=Math.max(e,E))+(c=Math.max(l,E)))>0&&B*f<A){var d=B*f/A;b*=d,c*=d,h(A>0)}e=Math.min(b,e),l=Math.min(c,l)}e>v&&(e=v),l>u&&(l=u),n[2][m]=e,n[3][m]=l}}function J(s,n){var a;return(a=s>=0?27*-s:s*n)<=-72?0:Math.exp(.2302585093*a)}function Q(s){var n,a,r=0;for(r=0;J(r,s)>1e-20;r-=1);for(t=r,_=0;Math.abs(_-t)>1e-12;)J(r=(_+t)/2,s)>0?_=r:t=r;n=t;var t,_;r=0;for(r=0;J(r,s)>1e-20;r+=1);for(t=0,_=r;Math.abs(_-t)>1e-12;)J(r=(_+t)/2,s)>0?t=r:_=r;a=_;var o,l=0,e=1e3;for(o=0;o<=e;++o){l+=J(r=n+o*(a-n)/e,s)}return 1001/(l*(a-n))}function V(s){return s<0&&(s=0),s*=.001,13*Math.atan(.76*s)+3.5*Math.atan(s*s/56.25)}function j(s,n,a,r,t,_,o,l,e,i,v,S){var M,b=f(u.CBANDS+1),c=l/(S>15?1152:384),p=m(u.HBLKSIZE);l/=e;var T=0,B=0;for(M=0;M<u.CBANDS;M++){var A;for(I=V(l*T),b[M]=l*T,A=T;V(l*A)-I<.34&&A<=e/2;A++);for(s[M]=A-T,B=M+1;T<A;)h(T<u.HBLKSIZE),p[T++]=M;if(T>e/2){T=e/2,++M;break}}h(M<u.CBANDS),b[M]=l*T;for(var E=0;E<S;E++){var d,P,k,y,w;k=i[E],y=i[E+1],(d=0|Math.floor(.5+v*(k-.5)))<0&&(d=0),(P=0|Math.floor(.5+v*(y-.5)))>e/2&&(P=e/2),a[E]=(p[d]+p[P])/2,n[E]=p[P];var L=c*y;o[E]=(L-b[n[E]])/(b[n[E]+1]-b[n[E]]),o[E]<0?o[E]=0:o[E]>1&&(o[E]=1),w=V(l*i[E]*v),w=Math.min(w,15.5)/15.5,_[E]=Math.pow(10,1.25*(1-Math.cos(Math.PI*w))-2.5)}T=0;for(var g=0;g<B;g++){var I,H,R=s[g];I=V(l*T),H=V(l*(T+R-1)),r[g]=.5*(I+H),I=V(l*(T-.5)),H=V(l*(T+R-.5)),t[g]=H-I,T+=R}return B}function U(s,n,a,r,t,_){var o,l,e,m,h,v,S=i([u.CBANDS,u.CBANDS]),M=0;if(_)for(var b=0;b<n;b++)for(o=0;o<n;o++){var c=(l=a[b]-a[o],e=void 0,m=void 0,h=void 0,v=void 0,e=l,m=(e*=e>=0?3:1.5)>=.5&&e<=2.5?8*((v=e-.5)*v-2*v):0,((h=15.811389+7.5*(e+=.474)-17.5*Math.sqrt(1+e*e))<=-60?0:(e=Math.exp(.2302585093*(m+h)),e/=.6609193))*r[o]);S[b][o]=c*t[b]}else for(o=0;o<n;o++){var p=15+Math.min(21/a[o],12),T=Q(p);for(b=0;b<n;b++){c=T*J(a[b]-a[o],p)*r[o];S[b][o]=c*t[b]}}for(b=0;b<n;b++){for(o=0;o<n&&!(S[b][o]>0);o++);for(s[b][0]=o,o=n-1;o>0&&!(S[b][o]>0);o--);s[b][1]=o,M+=s[b][1]-s[b][0]+1}var B=f(M),A=0;for(b=0;b<n;b++)for(o=s[b][0];o<=s[b][1];o++)B[A++]=S[b][o];return B}function z(s){var n=V(s);return n=Math.min(n,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*n))-2.5)}function W(s,n){return s<-.3&&(s=3410),s/=1e3,s=Math.max(.1,s),3.64*Math.pow(s,-.8)-6.8*Math.exp(-.6*Math.pow(s-3.4,2))+6*Math.exp(-.15*Math.pow(s-8.7,2))+.001*(.6+.04*n)*Math.pow(s,4)}this.L3psycho_anal_vbr=function(s,n,a,r,t,_,l,e,v,S){var M=s.internal_flags,b=f(u.HBLKSIZE),c=i([3,u.HBLKSIZE_s]),p=i([2,u.BLKSIZE]),T=i([2,3,u.BLKSIZE_s]),B=i([4,u.CBANDS]),A=i([4,u.CBANDS]),E=i([4,3]),d=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],P=m(2),w=s.mode==MPEGMode.JOINT_STEREO?4:M.channels_out;!function(s,n,a,r,t,_,o,l,e,m){for(var v=i([2,576]),u=s.internal_flags,S=u.channels_out,M=s.mode==MPEGMode.JOINT_STEREO?4:S,b=0;b<S;b++){firbuf=n[b];var c=a+576-350-21+192;h(10==C.length);for(var p=0;p<576;p++){var T,B;T=firbuf[c+p+10],B=0;for(var A=0;A<9;A+=2)T+=C[A]*(firbuf[c+p+A]+firbuf[c+p+21-A]),B+=C[A+1]*(firbuf[c+p+A+1]+firbuf[c+p+21-A-1]);v[b][p]=T+B}t[r][b].en.assign(u.en[b]),t[r][b].thm.assign(u.thm[b]),M>2&&(_[r][b].en.assign(u.en[b+2]),_[r][b].thm.assign(u.thm[b+2]))}for(b=0;b<M;b++){var E=f(12),d=f(12),P=[0,0,0,0],k=v[1&b],y=0,w=3==b?u.nsPsy.attackthre_s:u.nsPsy.attackthre,L=1;if(2==b)for(p=0,A=576;A>0;++p,--A){var g=v[0][p],I=v[1][p];v[0][p]=g+I,v[1][p]=g-I}for(p=0;p<3;p++)d[p]=u.nsPsy.last_en_subshort[b][p+6],h(u.nsPsy.last_en_subshort[b][p+4]>0),E[p]=d[p]/u.nsPsy.last_en_subshort[b][p+4],P[0]+=d[p];for(p=0;p<9;p++){for(var H=y+64,R=1;y<H;y++)R<Math.abs(k[y])&&(R=Math.abs(k[y]));u.nsPsy.last_en_subshort[b][p]=d[p+3]=R,P[1+p/3]+=R,R>d[p+3-2]?(h(d[p+3-2]>0),R/=d[p+3-2]):d[p+3-2]>10*R?(h(R>0),R=d[p+3-2]/(10*R)):R=0,E[p+3]=R}for(p=0;p<3;++p){var N=d[3*p+3]+d[3*p+4]+d[3*p+5],O=1;6*d[3*p+5]<N&&(O*=.5,6*d[3*p+4]<N&&(O*=.5)),l[b][p]=O}if(s.analysis){var Z=E[0];for(p=1;p<12;p++)Z<E[p]&&(Z=E[p]);u.pinfo.ers[r][b]=u.pinfo.ers_save[b],u.pinfo.ers_save[b]=Z}for(p=0;p<12;p++)0==e[b][p/3]&&E[p]>w&&(e[b][p/3]=p%3+1);for(p=1;p<4;p++){var K=P[p-1],Y=P[p];Math.max(K,Y)<4e4&&K<1.7*Y&&Y<1.7*K&&(1==p&&e[b][0]<=e[b][p]&&(e[b][0]=0),e[b][p]=0)}e[b][0]<=u.nsPsy.lastAttacks[b]&&(e[b][0]=0),3!=u.nsPsy.lastAttacks[b]&&e[b][0]+e[b][1]+e[b][2]+e[b][3]==0||(L=0,0!=e[b][1]&&0!=e[b][0]&&(e[b][1]=0),0!=e[b][2]&&0!=e[b][1]&&(e[b][2]=0),0!=e[b][3]&&0!=e[b][2]&&(e[b][3]=0)),b<2?m[b]=L:0==L&&(m[0]=m[1]=0),o[b]=u.tot_ener[b]}}(s,n,a,r,t,_,v,E,d,P),function(s,n){var a=s.internal_flags;s.short_blocks!=o.short_block_coupled||0!=n[0]&&0!=n[1]||(n[0]=n[1]=0);for(var r=0;r<a.channels_out;r++)s.short_blocks==o.short_block_dispensed&&(n[r]=1),s.short_blocks==o.short_block_forced&&(n[r]=0)}(s,P);for(var g=0;g<w;g++){K(s,n,a,g,r,b,p,N=1&g),x(s,r,g,b),0!=P[N]?q(M,b,B[g],A[g],g):X(M,g)}P[0]+P[1]==2&&s.mode==MPEGMode.JOINT_STEREO&&F(B,A,M.mld_cb_l,M.ATH.cb_l,s.ATHlower*M.ATH.adjust,s.msfix,M.npart_l);for(g=0;g<w;g++){0!=P[N=1&g]&&y(M,B[g],A[g],g)}for(var H=0;H<3;H++){for(g=0;g<w;++g){0!=P[N=1&g]?D(M,g,H):(Y(s,n,a,g,H,c,T,N),G(s,c,B[g],A[g],g,H))}P[0]+P[1]==0&&s.mode==MPEGMode.JOINT_STEREO&&F(B,A,M.mld_cb_s,M.ATH.cb_s,s.ATHlower*M.ATH.adjust,s.msfix,M.npart_s);for(g=0;g<w;++g){0==P[N=1&g]&&k(M,B[g],A[g],g,H)}}for(g=0;g<w;g++){var N;if(0==P[N=1&g])for(var O=0;O<u.SBMAX_s;O++){var Z=f(3);for(H=0;H<3;H++){var J=M.thm[g].s[O][H];if(J*=.8,d[g][H]>=2||1==d[g][H+1]){var Q=0!=H?H-1:2,V=L(M.thm[g].s[O][Q],J,.36);J=Math.min(J,V)}else if(1==d[g][H]){Q=0!=H?H-1:2,V=L(M.thm[g].s[O][Q],J,.18);J=Math.min(J,V)}else if(0!=H&&3==d[g][H-1]||0==H&&3==M.nsPsy.lastAttacks[g]){Q=2!=H?H+1:0,V=L(M.thm[g].s[O][Q],J,.18);J=Math.min(J,V)}J*=E[g][H],Z[H]=J}for(H=0;H<3;H++)M.thm[g].s[O][H]=Z[H]}}for(g=0;g<w;g++)M.nsPsy.lastAttacks[g]=d[g][2];!function(s,n,a){for(var r=s.internal_flags,t=0;t<r.channels_out;t++){var _=u.NORM_TYPE;0!=n[t]?(h(r.blocktype_old[t]!=u.START_TYPE),r.blocktype_old[t]==u.SHORT_TYPE&&(_=u.STOP_TYPE)):(_=u.SHORT_TYPE,r.blocktype_old[t]==u.NORM_TYPE&&(r.blocktype_old[t]=u.START_TYPE),r.blocktype_old[t]==u.STOP_TYPE&&(r.blocktype_old[t]=u.SHORT_TYPE)),a[t]=r.blocktype_old[t],r.blocktype_old[t]=_}}(s,P,S);for(g=0;g<w;g++){var j,U,z,W;g>1?(j=e,U=-2,z=u.NORM_TYPE,S[0]!=u.SHORT_TYPE&&S[1]!=u.SHORT_TYPE||(z=u.SHORT_TYPE),W=_[r][g-2]):(j=l,U=0,z=S[g],W=t[r][g]),z==u.SHORT_TYPE?j[U+g]=I(W,M.masking_lower):j[U+g]=R(W,M.masking_lower),s.analysis&&(M.pinfo.pe[r][g]=j[U+g])}return 0},this.psymodel_init=function(a){var r,o=a.internal_flags,l=!0,e=13,i=0,m=0,v=-8.25,S=-4.5,p=f(u.CBANDS),T=f(u.CBANDS),B=f(u.CBANDS),A=a.out_samplerate;switch(a.experimentalZ){default:case 0:l=!0;break;case 1:l=a.VBR!=t.vbr_mtrh&&a.VBR!=t.vbr_mt;break;case 2:l=!1;break;case 3:e=8,i=-1.75,m=-.0125,v=-8.25,S=-2.25}for(o.ms_ener_ratio_old=.25,o.blocktype_old[0]=o.blocktype_old[1]=u.NORM_TYPE,r=0;r<4;++r){for(var E=0;E<u.CBANDS;++E)o.nb_1[r][E]=1e20,o.nb_2[r][E]=1e20,o.nb_s1[r][E]=o.nb_s2[r][E]=1;for(var d=0;d<u.SBMAX_l;d++)o.en[r].l[d]=1e20,o.thm[r].l[d]=1e20;for(E=0;E<3;++E){for(d=0;d<u.SBMAX_s;d++)o.en[r].s[d][E]=1e20,o.thm[r].s[d][E]=1e20;o.nsPsy.lastAttacks[r]=0}for(E=0;E<9;E++)o.nsPsy.last_en_subshort[r][E]=10}for(o.loudness_sq_save[0]=o.loudness_sq_save[1]=0,o.npart_l=j(o.numlines_l,o.bo_l,o.bm_l,p,T,o.mld_l,o.PSY.bo_l_weight,A,u.BLKSIZE,o.scalefac_band.l,u.BLKSIZE/1152,u.SBMAX_l),h(o.npart_l<u.CBANDS),r=0;r<o.npart_l;r++){var P=i;p[r]>=e&&(P=m*(p[r]-e)/(24-e)+i*(24-p[r])/(24-e)),B[r]=Math.pow(10,P/10),o.numlines_l[r]>0?o.rnumlines_l[r]=1/o.numlines_l[r]:o.rnumlines_l[r]=0}o.s3_ll=U(o.s3ind,o.npart_l,p,T,B,l);var k;E=0;for(r=0;r<o.npart_l;r++){L=_.MAX_VALUE;for(var y=0;y<o.numlines_l[r];y++,E++){var w=A*E/(1e3*u.BLKSIZE);g=this.ATHformula(1e3*w,a)-20,g=Math.pow(10,.1*g),L>(g*=o.numlines_l[r])&&(L=g)}o.ATH.cb_l[r]=L,(L=20*p[r]/10-20)>6&&(L=100),L<-15&&(L=-15),L-=8,o.minval_l[r]=Math.pow(10,L/10)*o.numlines_l[r]}for(o.npart_s=j(o.numlines_s,o.bo_s,o.bm_s,p,T,o.mld_s,o.PSY.bo_s_weight,A,u.BLKSIZE_s,o.scalefac_band.s,u.BLKSIZE_s/384,u.SBMAX_s),h(o.npart_s<u.CBANDS),E=0,r=0;r<o.npart_s;r++){var L;P=v;p[r]>=e&&(P=S*(p[r]-e)/(24-e)+v*(24-p[r])/(24-e)),B[r]=Math.pow(10,P/10),L=_.MAX_VALUE;for(y=0;y<o.numlines_s[r];y++,E++){var g;w=A*E/(1e3*u.BLKSIZE_s);g=this.ATHformula(1e3*w,a)-20,g=Math.pow(10,.1*g),L>(g*=o.numlines_s[r])&&(L=g)}o.ATH.cb_s[r]=L,L=7*p[r]/12-7,p[r]>12&&(L*=1+3.1*Math.log(1+L)),p[r]<12&&(L*=1+2.3*Math.log(1-L)),L<-15&&(L=-15),L-=8,o.minval_s[r]=Math.pow(10,L/10)*o.numlines_s[r]}o.s3_ss=U(o.s3ind_s,o.npart_s,p,T,B,l),M=Math.pow(10,9/16),b=Math.pow(10,1.5),c=Math.pow(10,1.5),s.init_fft(o),o.decay=Math.exp(-1*n/(.01*A/192)),k=3.5,0!=(2&a.exp_nspsytune)&&(k=1),Math.abs(a.msfix)>0&&(k=a.msfix),a.msfix=k;for(var I=0;I<o.npart_l;I++)o.s3ind[I][1]>o.npart_l-1&&(o.s3ind[I][1]=o.npart_l-1);var H=576*o.mode_gr/A;if(o.ATH.decay=Math.pow(10,-1.2*H),o.ATH.adjust=.01,o.ATH.adjustLimit=1,h(o.bo_l[u.SBMAX_l-1]<=o.npart_l),h(o.bo_s[u.SBMAX_s-1]<=o.npart_s),-1!=a.ATHtype){var R=a.out_samplerate/u.BLKSIZE,N=0;for(w=0,r=0;r<u.BLKSIZE/2;++r)w+=R,o.ATH.eql_w[r]=1/Math.pow(10,this.ATHformula(w,a)/10),N+=o.ATH.eql_w[r];for(N=1/N,r=u.BLKSIZE/2;--r>=0;)o.ATH.eql_w[r]*=N}for(I=E=0;I<o.npart_s;++I)for(r=0;r<o.numlines_s[I];++r)++E;h(129==E);for(I=E=0;I<o.npart_l;++I)for(r=0;r<o.numlines_l[I];++r)++E;for(h(513==E),E=0,r=0;r<o.npart_l;r++){w=A*(E+o.numlines_l[r]/2)/(1*u.BLKSIZE);o.mld_cb_l[r]=z(w),E+=o.numlines_l[r]}for(;r<u.CBANDS;++r)o.mld_cb_l[r]=1;for(E=0,r=0;r<o.npart_s;r++){w=A*(E+o.numlines_s[r]/2)/(1*u.BLKSIZE_s);o.mld_cb_s[r]=z(w),E+=o.numlines_s[r]}for(;r<u.CBANDS;++r)o.mld_cb_s[r]=1;return 0},this.ATHformula=function(s,n){var a;switch(n.ATHtype){case 0:a=W(s,9);break;case 1:a=W(s,-1);break;case 2:a=W(s,0);break;case 3:a=W(s,1)+6;break;case 4:a=W(s,n.ATHcurve);break;default:a=W(s,0)}return a}}}}]);